CMAKE_MINIMUM_REQUIRED (VERSION 3.8)

PROJECT (libnetwrk C CXX)

IF(CMAKE_VERSION VERSION_GREATER 3.12) 
    IF(MSVC)
        ADD_DEFINITIONS(-D_CRT_SECURE_NO_WARNINGS)    
        ADD_DEFINITIONS(-D_WIN32_WINNT=0x0601)
        SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /std:c++20 /EHsc")
    ELSE()
        SET(CMAKE_CXX_STANDARD 20)
    ENDIF()
ELSE()
    IF(MSVC)
        ADD_DEFINITIONS(-D_CRT_SECURE_NO_WARNINGS)    
        ADD_DEFINITIONS(-D_WIN32_WINNT=0x0601)
        SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /std:c++17 /EHsc")
    ELSE()
        SET(CMAKE_CXX_STANDARD 17)
    ENDIF()
ENDIF()

INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/libnetwrk")
INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/libnetwrk/lib/asio")

ENABLE_TESTING()
ADD_SUBDIRECTORY("test")